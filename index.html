<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mentor de L√≠deres - Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            overflow-x: hidden !important;
            width: 100%;
            position: relative;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 0;
            margin: 0;
            color: #e4e4e4;
            overflow-x: hidden !important;
            width: 100%;
            position: relative;
        }

        .container {
            width: 100% !important;
            max-width: 100% !important;
            margin: 0 auto;
            padding: 0 5px !important;
            box-sizing: border-box;
            overflow-x: hidden !important;
        }

        /* Logo e Header */
        .brand-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px 30px 25px;
            background: rgba(45, 45, 68, 0.3);
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        .logo-container {
            width: 120px;
            height: 120px;
            margin: 0 auto 20px;
            background: white;
            border-radius: 50%;
            padding: 0;
            box-shadow: 0 10px 40px rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 4px solid rgba(13, 202, 240, 0.3);
        }

        .logo-lion {
            font-size: 70px;
            line-height: 1;
            filter: drop-shadow(0 5px 15px rgba(0,0,0,0.2));
        }

        .brand-title {
            font-size: 3em;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        .brand-subtitle {
            font-size: 1.4em;
            color: #b8b8b8;
            font-weight: 300;
        }

        /* Login Card */
        .login-card {
            background: rgba(45, 45, 68, 0.5);
            border-radius: 20px;
            padding: 40px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            max-width: 600px !important;
            margin: 0 auto !important;
        }

        .dashboard-card {
            background: rgba(45, 45, 68, 0.5);
            border-radius: 20px;
            padding: 20px 5px !important;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            width: 100% !important;
            max-width: 100% !important;
            box-sizing: border-box;
            margin: 0 auto;
        }

        #masterContent {
            width: 100% !important;
            max-width: 100% !important;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        .input-group {
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #e4e4e4;
            font-weight: 600;
        }

        .input-group input {
            width: 100%;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 10px;
            font-size: 1em;
            color: white;
            transition: all 0.3s;
        }

        .input-group input:focus {
            outline: none;
            border-color: #0dcaf0;
            background: rgba(255,255,255,0.15);
        }

        .input-group input::placeholder {
            color: rgba(255,255,255,0.5);
        }

        .btn-primary {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #0dcaf0 0%, #0ba8cc 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(13, 202, 240, 0.4);
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .link-button {
            text-align: center;
            margin-top: 15px;
        }

        .link-button a {
            color: #0dcaf0;
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
        }

        .link-button a:hover {
            text-decoration: underline;
        }

        .hidden {
            display: none;
        }

        /* Messages */
        .error-message, .success-message, .info-message {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid;
        }

        .error-message {
            background: rgba(220, 53, 69, 0.2);
            border-color: #dc3545;
            color: #ff6b6b;
        }

        .success-message {
            background: rgba(40, 167, 69, 0.2);
            border-color: #28a745;
            color: #51cf66;
        }

        .info-message {
            background: rgba(13, 202, 240, 0.2);
            border-color: #0dcaf0;
            color: #0dcaf0;
        }

        /* Dashboard Header */
        .dashboard-header {
            background: linear-gradient(135deg, #0dcaf0 0%, #0ba8cc 100%);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 5px 20px rgba(13, 202, 240, 0.2);
        }

        .dashboard-header h2 {
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .dashboard-header p {
            opacity: 0.9;
            font-size: 1em;
        }

        .badge-master {
            background: rgba(255,255,255,0.3);
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.9em;
        }

        .master-header-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .logout-btn-header {
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 10px 20px;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .logout-btn-header:hover {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.5);
        }

        /* Bot√£o Editar Nome e Sair (Aluno) */
        .aluno-header-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .btn-edit-name {
            background: rgba(255,255,255,0.1);
            color: #e4e4e4;
            padding: 8px 15px;
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9em;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn-edit-name:hover {
            background: rgba(255,255,255,0.2);
            border-color: rgba(255,255,255,0.4);
        }

        .logout-btn-aluno {
            background: rgba(255,255,255,0.1);
            color: #e4e4e4;
            padding: 8px 15px;
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9em;
            transition: all 0.3s;
        }

        .logout-btn-aluno:hover {
            background: rgba(255,255,255,0.2);
            border-color: rgba(255,255,255,0.4);
        }

        /* Modal de Edi√ß√£o de Nome */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-content {
            background: rgba(45, 45, 68, 0.95);
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }

        .modal-header {
            margin-bottom: 25px;
        }

        .modal-title {
            font-size: 1.8em;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 10px;
        }

        .modal-subtitle {
            color: #b8b8b8;
            font-size: 1em;
        }

        .modal-body {
            margin-bottom: 25px;
        }

        .modal-footer {
            display: flex;
            gap: 15px;
        }

        .btn-modal {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-cancel {
            background: rgba(255,255,255,0.1);
            color: #e4e4e4;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .btn-cancel:hover {
            background: rgba(255,255,255,0.2);
        }

        .btn-save {
            background: linear-gradient(135deg, #0dcaf0 0%, #0ba8cc 100%);
            color: white;
        }

        .btn-save:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(13, 202, 240, 0.4);
        }

        /* Vis√£o Estrat√©gica */
        .strategic-section {
            margin-bottom: 30px;
            width: 100% !important;
            max-width: 100% !important;
            box-sizing: border-box;
        }

        .strategic-title {
            font-size: 1.5em;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .kpi-card {
            background: rgba(26, 26, 46, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        .kpi-value {
            font-size: 2.5em;
            font-weight: 700;
            color: #0dcaf0;
            margin: 10px 0;
        }

        .kpi-label {
            color: #b8b8b8;
            font-size: 0.9em;
        }

        .kpi-sublabel {
            color: #808080;
            font-size: 0.8em;
            margin-top: 5px;
        }

        .comparison-table {
            width: 100% !important;
            max-width: 100% !important;
            background: rgba(26, 26, 46, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 30px;
            box-sizing: border-box;
        }

        .comparison-table table {
            width: 100% !important;
            border-collapse: collapse;
        }

        .comparison-table tr {
            width: 100% !important;
        }

        .comparison-table td {
            width: 100% !important;
            max-width: 100% !important;
        }

        .comparison-table th {
            background: rgba(13, 202, 240, 0.2);
            color: #ffffff;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .comparison-table td {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            color: #e4e4e4;
        }

        .comparison-table tr:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        .comparison-table th:nth-child(2),
        .comparison-table th:nth-child(3),
        .comparison-table td:nth-child(2),
        .comparison-table td:nth-child(3) {
            text-align: center;
        }

        .progress-bar-mini {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 5px;
        }

        .progress-fill-mini {
            height: 100%;
            background: linear-gradient(90deg, #0dcaf0 0%, #0ba8cc 100%);
            transition: width 0.3s;
        }

        .insight-box {
            background: rgba(13, 202, 240, 0.1);
            border-left: 4px solid #0dcaf0;
            border-radius: 10px;
            padding: 15px 20px;
            margin-bottom: 15px;
        }

        .insight-box h4 {
            color: #0dcaf0;
            font-size: 1.1em;
            margin-bottom: 10px;
        }

        .insight-box p {
            color: #e4e4e4;
            line-height: 1.6;
            margin: 5px 0;
        }

        .risk-badge {
            background: rgba(255, 59, 48, 0.2);
            color: #ff3b30;
            padding: 4px 10px;
            border-radius: 5px;
            font-size: 0.85em;
            font-weight: 600;
        }

        .success-badge {
            background: rgba(52, 199, 89, 0.2);
            color: #34c759;
            padding: 4px 10px;
            border-radius: 5px;
            font-size: 0.85em;
            font-weight: 600;
        }

        .gap-indicator {
            font-size: 0.85em;
            font-weight: 600;
        }

        .gap-positive {
            color: #34c759;
        }

        .gap-negative {
            color: #ff3b30;
        }

        /* Drill-down de Formul√°rios */
        .formulario-row {
            cursor: pointer;
            transition: background 0.2s;
        }

        .formulario-row:hover {
            background: rgba(13, 202, 240, 0.05) !important;
        }

        .formulario-row.expanded {
            background: rgba(13, 202, 240, 0.1) !important;
        }

        .expand-icon-table {
            display: inline-block;
            margin-left: 10px;
            transition: transform 0.3s;
            color: #0dcaf0;
            font-weight: bold;
        }

        .expanded .expand-icon-table {
            transform: rotate(180deg);
        }

        .formulario-details {
            display: none;
        }

        .formulario-details.active {
            display: block;
            width: 100% !important;
        }

        .formulario-details td {
            width: 100% !important;
            max-width: 100% !important;
        }

        .formulario-details-content {
            padding: 20px 5px !important;
            background: rgba(26, 26, 46, 0.3);
            border-left: 4px solid #0dcaf0;
            width: 100% !important;
            max-width: 100% !important;
            box-sizing: border-box;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .turmas-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px !important;
            margin-top: 15px;
            width: 95% !important;
            max-width: 1400px !important;
            padding: 0;
            box-sizing: border-box;
        }

        @media (max-width: 900px) {
            .turmas-comparison {
                grid-template-columns: 1fr;
            }
        }

        .turma-alunos-box {
            background: rgba(45, 45, 68, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px !important;
            min-height: 500px;
            width: 100% !important;
            max-width: 100% !important;
        }

        .turma-alunos-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px !important;
            margin-top: 15px;
            width: 100% !important;
        }

        .alunos-section {
            max-height: 650px;
            overflow-y: auto;
            padding-right: 10px;
            width: 100% !important;
        }

        .alunos-section::-webkit-scrollbar {
            width: 8px;
        }

        .alunos-section::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        .alunos-section::-webkit-scrollbar-thumb {
            background: rgba(13, 202, 240, 0.5);
            border-radius: 4px;
        }

        .alunos-section::-webkit-scrollbar-thumb:hover {
            background: rgba(13, 202, 240, 0.8);
        }

        @media (max-width: 700px) {
            .turma-alunos-content {
                grid-template-columns: 1fr;
            }
        }

        .turma-alunos-title {
            font-size: 1.4em;
            font-weight: 700;
            color: #0dcaf0;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .alunos-section-title {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            position: sticky;
            top: 0;
            background: rgba(45, 45, 68, 0.95);
            padding: 8px 0;
            z-index: 1;
        }

        .alunos-section-title.preenchidos {
            color: #34c759;
        }

        .alunos-section-title.pendentes {
            color: #ffc107;
        }

        .aluno-item {
            padding: 12px 15px;
            margin: 8px 0;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            font-size: 1em;
            color: #e4e4e4;
            transition: all 0.2s;
        }

        .aluno-item:hover {
            background: rgba(255, 255, 255, 0.06);
            transform: translateX(5px);
        }

        .aluno-item-email {
            font-size: 0.9em;
            color: #b8b8b8;
            margin-top: 5px;
        }

        .empty-list {
            color: #808080;
            font-style: italic;
            padding: 10px;
            text-align: center;
        }

        /* Progress Section */
        .progress-section {
            background: rgba(45, 45, 68, 0.5);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .progress-header h3 {
            font-size: 1.1em;
        }

        .progress-percentage {
            font-size: 1.5em;
            font-weight: 700;
            color: #0dcaf0;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #0dcaf0 0%, #0ba8cc 100%);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            color: white;
            font-weight: 600;
        }

        /* Section Titles */
        .section-title {
            font-size: 1.5em;
            font-weight: 700;
            color: #ffffff;
            margin: 40px 0 20px;
            padding-left: 15px;
            border-left: 5px solid #0dcaf0;
        }

        /* Biblioteca de Recursos */
        .biblioteca-section {
            background: rgba(45, 45, 68, 0.5);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .biblioteca-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .biblioteca-icon {
            font-size: 2.5em;
        }

        .biblioteca-title {
            font-size: 1.8em;
            font-weight: 700;
            color: #0dcaf0;
        }

        .recursos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .recurso-card {
            background: rgba(26, 26, 46, 0.5);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .recurso-card:hover {
            transform: translateY(-5px);
            border-color: rgba(13, 202, 240, 0.5);
            box-shadow: 0 10px 30px rgba(13, 202, 240, 0.2);
        }

        .recurso-header {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 15px;
        }

        .recurso-icon {
            font-size: 2.5em;
            min-width: 50px;
        }

        .recurso-info {
            flex: 1;
        }

        .recurso-title {
            font-size: 1.2em;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 8px;
        }

        .recurso-descricao {
            color: #b8b8b8;
            font-size: 0.95em;
            line-height: 1.5;
            margin-bottom: 15px;
        }

        .recurso-categoria {
            display: inline-block;
            background: rgba(13, 202, 240, 0.2);
            color: #0dcaf0;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .btn-download {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #0dcaf0 0%, #0ba8cc 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: block;
            text-align: center;
        }

        .btn-download:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(13, 202, 240, 0.4);
        }

        .empty-biblioteca {
            text-align: center;
            padding: 60px 20px;
            color: #b8b8b8;
        }

        .empty-biblioteca-icon {
            font-size: 4em;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        /* Acesso R√°pido */
        .acesso-rapido-section {
            background: rgba(45, 45, 68, 0.5);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .acesso-rapido-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .acesso-rapido-icon {
            font-size: 1.8em;
        }

        .acesso-rapido-title {
            font-size: 1.3em;
            font-weight: 700;
            color: #0dcaf0;
            margin: 0;
        }

        /* Bot√£o Plataforma de V√≠deos */
        .btn-plataforma-videos {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
            background: linear-gradient(135deg, #0dcaf0 0%, #0ba8cc 100%);
            padding: 20px 25px;
            border-radius: 12px;
            margin-bottom: 25px;
            text-decoration: none;
            color: white;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .btn-plataforma-videos:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(13, 202, 240, 0.4);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .btn-plataforma-videos .btn-icon {
            font-size: 2em;
        }

        .btn-plataforma-videos .btn-text {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 3px;
        }

        .btn-plataforma-videos strong {
            font-size: 1.1em;
        }

        .btn-plataforma-videos small {
            opacity: 0.9;
            font-size: 0.9em;
        }

        .btn-plataforma-videos .btn-arrow {
            font-size: 1.5em;
            font-weight: bold;
        }

        /* Agendamento */
        .agendamento-section {
            background: rgba(26, 26, 46, 0.5);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .agendamento-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .agendamento-icon {
            font-size: 1.5em;
        }

        .agendamento-header h4 {
            font-size: 1.1em;
            font-weight: 600;
            color: #ffffff;
            margin: 0;
        }

        .mentores-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }

        .btn-mentor {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(45, 45, 68, 0.7);
            padding: 15px 18px;
            border-radius: 10px;
            text-decoration: none;
            color: white;
            transition: all 0.3s;
            border: 2px solid rgba(255,255,255,0.1);
        }

        .btn-mentor:hover {
            background: rgba(13, 202, 240, 0.2);
            border-color: rgba(13, 202, 240, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(13, 202, 240, 0.2);
        }

        .btn-mentor .mentor-icon {
            font-size: 1.3em;
        }

        .btn-mentor .mentor-nome {
            flex: 1;
            font-weight: 600;
            font-size: 0.95em;
        }

        .btn-mentor .mentor-arrow {
            font-size: 1.2em;
            opacity: 0.7;
        }

        /* Formul√°rios */
        .formularios-grid {
            display: grid;
            gap: 20px;
        }

        .formulario-card {
            background: rgba(45, 45, 68, 0.5);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s;
        }

        .formulario-card:hover {
            transform: translateY(-5px);
            border-color: rgba(13, 202, 240, 0.5);
            box-shadow: 0 10px 30px rgba(13, 202, 240, 0.2);
        }

        .formulario-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .formulario-title {
            font-size: 1.2em;
            font-weight: 600;
        }

        .status-badge {
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9em;
        }

        .status-preenchido {
            background: rgba(40, 167, 69, 0.3);
            color: #51cf66;
            border: 1px solid #51cf66;
        }

        .status-pendente {
            background: rgba(220, 53, 69, 0.3);
            color: #ff6b6b;
            border: 1px solid #ff6b6b;
        }

        .btn-formulario {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-preencher {
            background: linear-gradient(135deg, #0dcaf0 0%, #0ba8cc 100%);
            color: white;
        }

        .btn-preencher:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(13, 202, 240, 0.4);
        }

        .btn-concluido {
            background: rgba(40, 167, 69, 0.3);
            color: #51cf66;
            cursor: default;
            border: 1px solid #51cf66;
        }

        /* Master Dashboard */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(45, 45, 68, 0.5);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: rgba(13, 202, 240, 0.5);
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: 700;
            color: #0dcaf0;
            margin-bottom: 10px;
        }

        .stat-label {
            color: #b8b8b8;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 24px;
            background: rgba(45, 45, 68, 0.5);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            color: #e4e4e4;
        }

        .tab.active {
            background: linear-gradient(135deg, #0dcaf0 0%, #0ba8cc 100%);
            border-color: #0dcaf0;
            color: white;
        }

        .tab:hover {
            transform: translateY(-2px);
            border-color: rgba(13, 202, 240, 0.5);
        }

        /* Aluno Card Expand√≠vel */
        .aluno-card {
            background: rgba(45, 45, 68, 0.5);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            margin-bottom: 15px;
            overflow: hidden;
            transition: all 0.3s;
        }

        .aluno-card:hover {
            border-color: rgba(13, 202, 240, 0.5);
        }

        .aluno-header {
            padding: 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .aluno-info {
            flex: 1;
        }

        .aluno-nome {
            font-weight: 600;
            font-size: 1.1em;
            margin-bottom: 5px;
        }

        .aluno-email {
            color: #b8b8b8;
            font-size: 0.9em;
        }

        .aluno-stats {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .mini-progress {
            font-size: 0.9em;
            color: #0dcaf0;
            font-weight: 600;
        }

        .expand-icon {
            font-size: 1.5em;
            color: #0dcaf0;
            transition: transform 0.3s;
        }

        .aluno-card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .aluno-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background: rgba(26, 26, 46, 0.5);
        }

        .aluno-card.expanded .aluno-details {
            max-height: 1000px;
        }

        .formularios-table {
            width: 100%;
            margin: 20px;
        }

        .formularios-table table {
            width: calc(100% - 40px);
            border-collapse: collapse;
        }

        .formularios-table th {
            text-align: left;
            padding: 12px;
            background: rgba(13, 202, 240, 0.2);
            border-bottom: 2px solid #0dcaf0;
            color: #0dcaf0;
            font-weight: 600;
        }

        .formularios-table td {
            padding: 12px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .formularios-table tr:hover {
            background: rgba(255,255,255,0.05);
        }

        .status-icon {
            font-size: 1.2em;
        }

        .logout-btn {
            background: rgba(255,255,255,0.1);
            color: #e4e4e4;
            padding: 10px 20px;
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.2);
            border-color: rgba(255,255,255,0.4);
        }

        .password-strength {
            height: 5px;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
            margin-top: 5px;
            overflow: hidden;
        }

        .password-strength-bar {
            height: 100%;
            width: 0%;
            transition: all 0.3s;
        }

        .strength-weak { background: #dc3545; }
        .strength-medium { background: #ffc107; }
        .strength-strong { background: #28a745; }

        @media (max-width: 768px) {
            .dashboard-header {
                flex-direction: column;
                text-align: center;
            }

            .aluno-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .aluno-stats {
                width: 100%;
                justify-content: space-between;
            }

            .brand-title {
                font-size: 2em;
            }

            .logo-container {
                width: 100px;
                height: 100px;
            }

            .logo-lion {
                font-size: 60px;
            }

            .brand-subtitle {
                font-size: 1.1em;
            }

            .recursos-grid {
                grid-template-columns: 1fr;
            }

            .master-header-actions {
                flex-direction: column;
                gap: 10px;
            }

            .logout-btn-header {
                width: 100%;
            }
        }
        /* ==================== SE√á√ÉO ARQU√âTIPO ==================== */

.arquetipo-section {
    background: rgba(45, 45, 68, 0.5);
    padding: 30px;
    border-radius: 20px;
    margin-bottom: 30px;
    border: 1px solid rgba(255,255,255,0.1);
}

.arquetipo-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 2px solid rgba(13, 202, 240, 0.3);
}

.arquetipo-icon-header {
    font-size: 2.5em;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

.arquetipo-title-main {
    font-size: 2em;
    font-weight: 700;
    color: #0dcaf0;
    margin: 0;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.arquetipo-card {
    background: linear-gradient(135deg, rgba(26, 26, 46, 0.8) 0%, rgba(26, 26, 46, 0.4) 100%);
    border: 2px solid rgba(13, 202, 240, 0.3);
    border-radius: 20px;
    padding: 40px;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
}

.arquetipo-card::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(13, 202, 240, 0.1) 0%, transparent 70%);
    animation: rotate 10s linear infinite;
}

@keyframes rotate {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.arquetipo-card-content {
    position: relative;
    z-index: 1;
    text-align: center;
}

.arquetipo-emoji {
    font-size: 6em;
    margin-bottom: 20px;
    animation: float 3s ease-in-out infinite;
}

@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

.arquetipo-nome {
    font-size: 2.5em;
    font-weight: 900;
    color: #ffffff;
    margin-bottom: 20px;
    text-transform: uppercase;
    letter-spacing: 2px;
    text-shadow: 0 0 20px rgba(13, 202, 240, 0.5);
}

.arquetipo-frase {
    font-size: 1.3em;
    font-style: italic;
    color: #0dcaf0;
    margin-bottom: 35px;
    line-height: 1.6;
    font-weight: 500;
}

.arquetipo-detalhes {
    display: grid;
    gap: 20px;
    margin-bottom: 35px;
    text-align: left;
}

.arquetipo-item {
    background: rgba(45, 45, 68, 0.6);
    padding: 20px;
    border-radius: 15px;
    border-left: 4px solid #0dcaf0;
    transition: all 0.3s;
}

.arquetipo-item:hover {
    background: rgba(45, 45, 68, 0.8);
    transform: translateX(5px);
    border-left-color: #ffffff;
}

.arquetipo-label {
    display: block;
    font-size: 0.9em;
    font-weight: 700;
    color: #0dcaf0;
    margin-bottom: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.arquetipo-texto {
    font-size: 1.05em;
    color: #e4e4e4;
    line-height: 1.6;
    margin: 0;
}

.btn-download-arquetipo {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    background: linear-gradient(135deg, #0dcaf0 0%, #0ba8cc 100%);
    color: white;
    padding: 18px 35px;
    border-radius: 50px;
    font-size: 1.1em;
    font-weight: 700;
    text-decoration: none;
    transition: all 0.3s;
    border: 2px solid transparent;
    box-shadow: 0 5px 20px rgba(13, 202, 240, 0.3);
}

.btn-download-arquetipo:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 10px 30px rgba(13, 202, 240, 0.5);
    border-color: rgba(255, 255, 255, 0.3);
}

.btn-download-arquetipo .btn-icon {
    font-size: 1.3em;
}

/* Responsivo */
@media (max-width: 768px) {
    .arquetipo-section {
        padding: 20px;
    }
    
    .arquetipo-card {
        padding: 25px;
    }
    
    .arquetipo-emoji {
        font-size: 4em;
    }
    
    .arquetipo-nome {
        font-size: 1.8em;
    }
    
    .arquetipo-frase {
        font-size: 1.1em;
    }
    
    .btn-download-arquetipo {
        padding: 15px 25px;
        font-size: 1em;
    }
}
    </style>
</head>
<body>
    <div class="container">
        <!-- Logo e Header -->
        <div class="brand-header">
            <div class="logo-container">
                <div class="logo-lion">ü¶Å</div>
            </div>
            <h1 class="brand-title">Mentor de L√≠deres</h1>
            <p class="brand-subtitle">Transformando Potencial em Lideran√ßa</p>
        </div>

        <!-- Tela de Login -->
        <div id="loginScreen">
            <div class="login-card">
                <div id="loginMessage"></div>
                <form id="loginForm">
                    <div class="input-group">
                        <label for="emailInput">Email</label>
                        <input type="email" id="emailInput" placeholder="seu@email.com" required>
                    </div>
                    <div class="input-group">
                        <label for="senhaInput">Senha</label>
                        <input type="password" id="senhaInput" placeholder="Digite sua senha" required>
                    </div>
                    <button type="submit" class="btn-primary" id="btnLogin">Entrar</button>
                </form>
                <div class="link-button">
                    <a id="linkEsqueciSenha">Esqueci minha senha</a>
                </div>
            </div>
        </div>

        <!-- Tela de Recupera√ß√£o de Senha -->
        <div id="recuperarSenhaScreen" class="hidden">
            <div class="login-card">
                <div id="recuperarMessage"></div>
                <form id="recuperarForm">
                    <div class="input-group">
                        <label for="emailRecuperar">Email</label>
                        <input type="email" id="emailRecuperar" placeholder="seu@email.com" required>
                    </div>
                    <button type="submit" class="btn-primary" id="btnRecuperar">Recuperar Senha</button>
                </form>
                <div class="link-button">
                    <a id="linkVoltarLogin">Voltar para o login</a>
                </div>
            </div>
        </div>

        <!-- Tela de Redefinir Senha -->
        <div id="redefinirSenhaScreen" class="hidden">
            <div class="login-card">
                <div id="redefinirMessage"></div>
                <form id="redefinirForm">
                    <div class="input-group">
                        <label for="codigoRecuperacao">C√≥digo de Recupera√ß√£o</label>
                        <input type="text" id="codigoRecuperacao" placeholder="Digite o c√≥digo recebido" required>
                    </div>
                    <div class="input-group">
                        <label for="novaSenha">Nova Senha</label>
                        <input type="password" id="novaSenha" placeholder="Digite a nova senha" required>
                        <div class="password-strength">
                            <div class="password-strength-bar" id="strengthBar"></div>
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="confirmarSenha">Confirmar Nova Senha</label>
                        <input type="password" id="confirmarSenha" placeholder="Confirme a nova senha" required>
                    </div>
                    <button type="submit" class="btn-primary" id="btnRedefinir">Redefinir Senha</button>
                </form>
                <div class="link-button">
                    <a id="linkVoltarLogin2">Voltar para o login</a>
                </div>
            </div>
        </div>

        <!-- Tela de Primeiro Acesso -->
        <div id="primeiroAcessoScreen" class="hidden">
            <div class="login-card">
                <h2 style="text-align: center; margin-bottom: 20px;">üéâ Bem-vindo(a)!</h2>
                <div id="primeiroAcessoMessage"></div>
                <form id="primeiroAcessoForm">
                    <div class="input-group">
                        <label for="nomePreferidoInput">Como gostaria de ser chamado(a)?</label>
                        <input type="text" id="nomePreferidoInput" placeholder="Digite seu nome preferido" required>
                    </div>
                    <div class="input-group">
                        <label for="novaSenhaPrimeiroAcesso">Crie sua senha</label>
                        <input type="password" id="novaSenhaPrimeiroAcesso" placeholder="Digite sua nova senha" required>
                        <div class="password-strength">
                            <div class="password-strength-bar" id="strengthBarPrimeiroAcesso"></div>
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="confirmarSenhaPrimeiroAcesso">Confirme sua senha</label>
                        <input type="password" id="confirmarSenhaPrimeiroAcesso" placeholder="Confirme sua nova senha" required>
                    </div>
                    <button type="submit" class="btn-primary" id="btnPrimeiroAcesso">Continuar</button>
                </form>
            </div>
        </div>

        <!-- Dashboard do Aluno -->
        <div id="dashboardScreen" class="hidden">
            <div class="dashboard-card">
                <div id="dashboardContent"></div>
            </div>
        </div>

        <!-- Dashboard Master -->
        <div id="masterDashboard" class="hidden">
            <div class="dashboard-card">
                <div id="masterContent"></div>
            </div>
        </div>
    </div>

    <!-- Modal de Edi√ß√£o de Nome -->
    <div id="modalEditarNome" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">‚úèÔ∏è Editar Nome Preferido</h3>
                <p class="modal-subtitle">Como voc√™ gostaria de ser chamado(a)?</p>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label for="novoNomePreferido">Nome Preferido</label>
                    <input type="text" id="novoNomePreferido" placeholder="Digite seu nome preferido">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-modal btn-cancel" id="btnCancelarNome">Cancelar</button>
                <button class="btn-modal btn-save" id="btnSalvarNome">Salvar</button>
            </div>
        </div>
    </div>

    <script>
        // ==================== CONFIGURA√á√ÉO ====================
        const PLANILHA_ID = '1OjxHwWh6kWaNgQrCPP57GB_FMs4LVFH3Orbve3ciylQ';
        const PLANILHA_URL = `https://docs.google.com/spreadsheets/d/${PLANILHA_ID}/gviz/tq?tqx=out:json`;

        // ==================== DADOS DOS ARQU√âTIPOS ====================
        const ARQUETIPOS_DATA = {
            "Inocente": {
                emoji: "üïäÔ∏è",
                frase: "A confian√ßa e a otimismo s√£o meus guias para um mundo melhor",
                forca: "Pureza de inten√ß√µes, f√© inabal√°vel, capacidade de ver o bem em todas as situa√ß√µes",
                desafio: "Evitar a ingenuidade excessiva e desenvolver discernimento sem perder a esperan√ßa",
                missao: "Trazer luz e renova√ß√£o, inspirando outros a acreditar em possibilidades positivas",
                cor: "#87ceeb",
                link: "https://drive.google.com/file/d/1BHVakykvtbOIJ_1hNamKu1XQmyNUJ90m/view"
            },
            "Mago": {
                emoji: "üîÆ",
                frase: "Transformo sonhos em realidade atrav√©s do conhecimento e da a√ß√£o",
                forca: "Vis√£o transformadora, capacidade de materializar ideias, poder de catalizar mudan√ßas",
                desafio: "Usar o poder com responsabilidade e n√£o manipular outras pessoas",
                missao: "Transformar o mundo atrav√©s da inova√ß√£o e fazer o imposs√≠vel acontecer",
                cor: "#673ab7",
                link: "https://drive.google.com/file/d/11qydMB9fQwtK_NwUqqiRBmWHo-l9OLs6/view"
            },
            "Prestativo": {
                emoji: "ü§≤",
                frase: "Minha for√ßa est√° em cuidar e servir aos outros com amor genu√≠no",
                forca: "Compaix√£o profunda, generosidade natural, capacidade de nutrir e apoiar",
                desafio: "Aprender a cuidar de si mesmo sem se esquecer de suas pr√≥prias necessidades",
                missao: "Fazer a diferen√ßa atrav√©s do servi√ßo altru√≠sta e do cuidado com o pr√≥ximo",
                cor: "#4caf50",
                link: "https://drive.google.com/file/d/12eJnI8QQZWJNxDaUdtDodXX2OeoQin9I/view"
            },
            "S√°bio": {
                emoji: "üìñ",
                frase: "Busco a verdade e compartilho conhecimento para iluminar caminhos",
                forca: "Sabedoria profunda, pensamento anal√≠tico, busca constante pelo conhecimento",
                desafio: "Transformar conhecimento em a√ß√£o e n√£o se perder na paralisia pela an√°lise",
                missao: "Descobrir verdades e compartilhar sabedoria para melhorar o mundo",
                cor: "#2196f3",
                link: "https://drive.google.com/file/d/1KFYCzWI1Su3Uu-_n43zh9Zpxz-Pf-l2n/view"
            },
            "Amante": {
                emoji: "‚ù§Ô∏è",
                frase: "Vivo intensamente cada momento, celebrando paix√£o e conex√µes profundas",
                forca: "Paix√£o intensa, capacidade de criar v√≠nculos profundos, aprecia√ß√£o da beleza",
                desafio: "Manter equil√≠brio e identidade pr√≥pria sem perder a intensidade",
                missao: "Cultivar amor, intimidade e experi√™ncias que celebram a vida",
                cor: "#e91e63",
                link: "https://drive.google.com/file/d/1ZVpoxfLe7FmdCbGPbkU5I6Aem0pedD0C/view"
            },
            "Bobo da Corte": {
                emoji: "ü§π",
                frase: "Atrav√©s da alegria e do humor, transformo o comum em extraordin√°rio",
                forca: "Alegria contagiante, espontaneidade, capacidade de viver o momento presente",
                desafio: "Desenvolver seriedade quando necess√°rio sem perder a leveza",
                missao: "Trazer alegria e ajudar outros a aproveitarem a jornada da vida",
                cor: "#ff9800",
                link: "https://drive.google.com/file/d/1rICMnizREBE18SXj8UlptJ5oG9_4EtjX/view"
            },
            "Criador": {
                emoji: "üé®",
                frase: "Dou vida √† imagina√ß√£o, criando algo √∫nico e duradouro",
                forca: "Imagina√ß√£o f√©rtil, habilidades criativas, vis√£o art√≠stica √∫nica",
                desafio: "Completar projetos e n√£o se perder no perfeccionismo paralisante",
                missao: "Criar algo de valor duradouro e expressar a vis√£o interior",
                cor: "#9c27b0",
                link: "https://drive.google.com/file/d/1cN14uvBAA6bDEwBz13r68EZiP7ZrTxcK/view"
            },
            "Explorador": {
                emoji: "üß≠",
                frase: "Busco novos horizontes e experi√™ncias que expandem minha alma",
                forca: "Coragem para explorar, autonomia, busca constante por autenticidade",
                desafio: "Encontrar prop√≥sito al√©m da busca e criar ra√≠zes quando necess√°rio",
                missao: "Descobrir novos territ√≥rios e viver uma vida aut√™ntica e significativa",
                cor: "#795548",
                link: "https://drive.google.com/file/d/1lyUCBfEFdpU3d-b4H9OA_TBkw34KqxFI/view"
            },
            "Fora-da-Lei": {
                emoji: "‚ö°",
                frase: "Desafio o status quo para criar um mundo melhor e mais justo",
                forca: "Coragem de desafiar, pensamento revolucion√°rio, energia para mudan√ßas radicais",
                desafio: "Canalizar a rebeldia de forma construtiva sem se tornar destrutivo",
                missao: "Romper com o que n√£o funciona e libertar os oprimidos",
                cor: "#212121",
                link: "https://drive.google.com/file/d/1S7cSds2EBhYv9Z89keky4OZhoFwgOJ8N/view"
            },
            "Governante": {
                emoji: "üëë",
                frase: "Lidero com responsabilidade para criar ordem e prosperidade",
                forca: "Lideran√ßa natural, capacidade de organizar, vis√£o estrat√©gica",
                desafio: "Evitar o controle excessivo e aprender a delegar com confian√ßa",
                missao: "Criar um ambiente pr√≥spero e est√°vel para todos",
                cor: "#ffd700",
                link: "https://drive.google.com/file/d/1UyqIw8B6Y7c7KC4F39jPyua9YxCsPLS9/view"
            },
            "Her√≥i": {
                emoji: "‚öîÔ∏è",
                frase: "Enfrento desafios com coragem para proteger o que importa",
                forca: "Coragem excepcional, determina√ß√£o inabal√°vel, capacidade de superar obst√°culos",
                desafio: "Reconhecer limita√ß√µes e aceitar ajuda sem sentir fraqueza",
                missao: "Provar o valor atrav√©s de atos corajosos e inspirar outros",
                cor: "#f44336",
                link: "https://drive.google.com/file/d/1EQmKb9fpHicpe1NAAlUVBCmyNQ4NxAop/view"
            },
            "Homem Comum": {
                emoji: "ü§ù",
                frase: "Minha for√ßa est√° na autenticidade e na conex√£o genu√≠na com todos",
                forca: "Empatia natural, autenticidade, capacidade de criar senso de comunidade",
                desafio: "Desenvolver confian√ßa pr√≥pria sem perder a humildade",
                missao: "Pertencer e ajudar outros a se sentirem aceitos como s√£o",
                cor: "#607d8b",
                link: "https://drive.google.com/file/d/1kTvylHOYpzbTu41GnvQisHcQbTk4Xv5A/view"
            }
        };

        // ==================== VARI√ÅVEIS GLOBAIS ====================
        let todosAlunos = [];
        let alunoData = null;
        let biblioteca = [];

        // ==================== UTILIT√ÅRIOS ====================
        function mostrarMensagem(elementId, mensagem, tipo) {
            const el = document.getElementById(elementId);
            el.className = tipo === 'erro' ? 'error-message' : 
                          tipo === 'sucesso' ? 'success-message' : 'info-message';
            el.textContent = mensagem;
            el.style.display = 'block';
        }

        function limparMensagem(elementId) {
            document.getElementById(elementId).style.display = 'none';
        }

        function trocarTela(esconderIds, mostrarId) {
            esconderIds.forEach(id => document.getElementById(id).classList.add('hidden'));
            document.getElementById(mostrarId).classList.remove('hidden');
        }

        function calcularForcaSenha(senha) {
            let forca = 0;
            if (senha.length >= 8) forca++;
            if (senha.length >= 12) forca++;
            if (/[a-z]/.test(senha) && /[A-Z]/.test(senha)) forca++;
            if (/\d/.test(senha)) forca++;
            if (/[^a-zA-Z0-9]/.test(senha)) forca++;
            return Math.min(forca, 3);
        }

        function atualizarBarraForca(senhaInput, barraId) {
            const senha = senhaInput.value;
            const barra = document.getElementById(barraId);
            const forca = calcularForcaSenha(senha);
            
            barra.style.width = (forca * 33.33) + '%';
            barra.className = 'password-strength-bar';
            
            if (forca === 1) barra.classList.add('strength-weak');
            else if (forca === 2) barra.classList.add('strength-medium');
            else if (forca === 3) barra.classList.add('strength-strong');
        }

        // ==================== CARREGAR DADOS ====================
        async function carregarDados() {
            try {
                const response = await fetch(PLANILHA_URL);
                const text = await response.text();
                const json = JSON.parse(text.substring(47, text.length - 2));
                
                todosAlunos = [];
                biblioteca = [];
                
                json.table.rows.forEach((row, index) => {
                    if (index === 0) return;
                    
                    const tipo = row.c[0]?.v;
                    
                    if (tipo === 'Aluno') {
                        todosAlunos.push({
                            nome: row.c[1]?.v || '',
                            nomePreferido: row.c[2]?.v || '',
                            email: row.c[3]?.v || '',
                            senha: row.c[4]?.v || '',
                            codigoRecuperacao: row.c[5]?.v || '',
                            turma: row.c[6]?.v || '',
                            primeiroAcesso: row.c[7]?.v || 'Sim',
                            arquetipo: row.c[11]?.v || '',
                            formularios: [
                                { nome: 'Trajet√≥ria de Carreira', status: row.c[12]?.v || 'Pendente', link: row.c[13]?.v || '' },
                                { nome: 'Roda da Vida e do Trabalho', status: row.c[14]?.v || 'Pendente', link: row.c[15]?.v || '' },
                                { nome: 'Invent√°rio de Personalidade', status: row.c[16]?.v || 'Pendente', link: row.c[17]?.v || '' },
                                { nome: 'An√°lise Profunda', status: row.c[18]?.v || 'Pendente', link: row.c[19]?.v || '' },
                                { nome: 'Portf√≥lio de Lideran√ßa', status: row.c[20]?.v || 'Pendente', link: row.c[21]?.v || '' },
                                { nome: 'Plano de Desenvolvimento', status: row.c[22]?.v || 'Pendente', link: row.c[23]?.v || '' }
                            ]
                        });
                    } else if (tipo === 'Biblioteca') {
                        biblioteca.push({
                            titulo: row.c[1]?.v || '',
                            descricao: row.c[2]?.v || '',
                            categoria: row.c[3]?.v || '',
                            link: row.c[4]?.v || '',
                            emoji: row.c[5]?.v || 'üìÑ'
                        });
                    }
                });
                
                console.log('‚úÖ Dados carregados:', todosAlunos.length, 'alunos e', biblioteca.length, 'recursos');
                return true;
            } catch (erro) {
                console.error('‚ùå Erro ao carregar dados:', erro);
                return false;
            }
        }

        // ==================== FUN√á√ÉO ARQU√âTIPO (NOVA!) ====================
        function renderizarArquetipo() {
            console.log('üéØ Renderizando arqu√©tipo...');
            
            const arquetipoSection = document.getElementById('arquetipoSection');
            if (!arquetipoSection) {
                console.error('‚ùå Se√ß√£o de arqu√©tipo n√£o encontrada no HTML');
                return;
            }

            const arquetipoNome = alunoData.arquetipo;
            console.log('üìã Arqu√©tipo do aluno:', arquetipoNome);

            // Se n√£o tem arqu√©tipo ou √© "Pendente", esconde a se√ß√£o
            if (!arquetipoNome || arquetipoNome === 'Pendente' || arquetipoNome.trim() === '') {
                console.log('‚ö†Ô∏è Aluno n√£o tem arqu√©tipo definido');
                arquetipoSection.style.display = 'none';
                return;
            }

            // Busca dados do arqu√©tipo
            const arquetipo = ARQUETIPOS_DATA[arquetipoNome];
            
            if (!arquetipo) {
                console.error('‚ùå Arqu√©tipo n√£o encontrado:', arquetipoNome);
                arquetipoSection.style.display = 'none';
                return;
            }

            console.log('‚úÖ Dados do arqu√©tipo encontrados:', arquetipo);

            // Aplica a cor personalizada
            const card = arquetipoSection.querySelector('.arquetipo-card');
            const nome = arquetipoSection.querySelector('.arquetipo-nome');
            if (card) card.style.borderColor = arquetipo.cor;
            if (nome) nome.style.textShadow = `0 0 20px ${arquetipo.cor}`;

            // Preenche os dados
            arquetipoSection.querySelector('.arquetipo-emoji').textContent = arquetipo.emoji;
            arquetipoSection.querySelector('.arquetipo-nome').textContent = arquetipoNome;
            arquetipoSection.querySelector('.arquetipo-frase').textContent = arquetipo.frase;
            
            arquetipoSection.querySelector('.arquetipo-detalhes').innerHTML = `
                <div class="arquetipo-item">
                    <span class="arquetipo-label">üí™ Sua For√ßa</span>
                    <p class="arquetipo-texto">${arquetipo.forca}</p>
                </div>
                <div class="arquetipo-item">
                    <span class="arquetipo-label">üéØ Seu Desafio</span>
                    <p class="arquetipo-texto">${arquetipo.desafio}</p>
                </div>
                <div class="arquetipo-item">
                    <span class="arquetipo-label">üåü Sua Miss√£o</span>
                    <p class="arquetipo-texto">${arquetipo.missao}</p>
                </div>
            `;

            const btnDownload = arquetipoSection.querySelector('.btn-download-arquetipo');
            btnDownload.href = arquetipo.link;
            btnDownload.target = '_blank';

            // Mostra a se√ß√£o
            arquetipoSection.style.display = 'block';
            console.log('‚úÖ Arqu√©tipo renderizado com sucesso!');
        }

        // ==================== LOGIN ====================
        async function verificarAluno(email, senha) {
            const carregou = await carregarDados();
            if (!carregou) return null;
            
            if (email === 'master@febracis.com.br' && senha === 'Master2024!') {
                return { tipo: 'master' };
            }
            
            const aluno = todosAlunos.find(a => a.email.toLowerCase() === email.toLowerCase());
            
            if (!aluno) return null;
            if (aluno.senha !== senha) return null;
            
            const emailAluno = aluno.email;
            const turma = aluno.turma;
            
            return {
                tipo: 'aluno',
                nome: aluno.nome,
                nomePreferido: aluno.nomePreferido,
                email: emailAluno,
                turma: turma,
                arquetipo: aluno.arquetipo || '',  // ‚Üê CORRE√á√ÉO 1 APLICADA!
                formularios: [
                    { nome: 'Trajet√≥ria de Carreira', status: aluno.formularios[0].status, link: aluno.formularios[0].link },
                    { nome: 'Roda da Vida e do Trabalho', status: aluno.formularios[1].status, link: aluno.formularios[1].link },
                    { nome: 'Invent√°rio de Personalidade', status: aluno.formularios[2].status, link: aluno.formularios[2].link },
                    { nome: 'An√°lise Profunda', status: aluno.formularios[3].status, link: aluno.formularios[3].link },
                    { nome: 'Portf√≥lio de Lideran√ßa', status: aluno.formularios[4].status, link: aluno.formularios[4].link },
                    { nome: 'Plano de Desenvolvimento', status: aluno.formularios[5].status, link: aluno.formularios[5].link }
                ],
                primeiroAcesso: aluno.primeiroAcesso === 'Sim'
            };
        }

        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            limparMensagem('loginMessage');
            
            const email = document.getElementById('emailInput').value;
            const senha = document.getElementById('senhaInput').value;
            const btnLogin = document.getElementById('btnLogin');
            
            btnLogin.disabled = true;
            btnLogin.textContent = 'Entrando...';
            
            const usuario = await verificarAluno(email, senha);
            
            if (!usuario) {
                mostrarMensagem('loginMessage', 'Email ou senha incorretos', 'erro');
                btnLogin.disabled = false;
                btnLogin.textContent = 'Entrar';
                return;
            }
            
            if (usuario.tipo === 'master') {
                trocarTela(['loginScreen'], 'masterDashboard');
                await renderizarMasterDashboard();
            } else {
                alunoData = usuario;
                
                if (usuario.primeiroAcesso) {
                    trocarTela(['loginScreen'], 'primeiroAcessoScreen');
                } else {
                    trocarTela(['loginScreen'], 'dashboardScreen');
                    mostrarDashboard();
                }
            }
            
            btnLogin.disabled = false;
            btnLogin.textContent = 'Entrar';
        });

        // ==================== DASHBOARD ALUNO ====================
        function mostrarDashboard() {
            const progress = calcularProgresso();
            const nomeExibicao = alunoData.nomePreferido || alunoData.nome.split(' ')[0];
            
            const linksPlataforma = {
                'TURMA 1': 'https://drive.google.com/drive/folders/1IU2yt38HVwVdcYHY8I2FgQ1yETU7PQy_',
                'TURMA 2': 'https://drive.google.com/drive/folders/1G-Y7gMZZyI9M3sTTmPPCdUXqIKUfn4Zy'
            };
            
            const calendarios = {
                'TURMA 1': [
                    { nome: 'Igor Vidor', link: 'https://calendly.com/igor-vidor/mentoria-individualizada-do-programa-mentor-de-lideres' },
                    { nome: 'Vinicius de Freitas', link: 'https://calendly.com/vinicius-mentorespro/mentoria-individualizada-do-programa-mentor-de-lideres' }
                ],
                'TURMA 2': [
                    { nome: 'Murilo Dias', link: 'https://calendly.com/murilo-feb/mentoria-individualizada-do-programa-mentor-de-lideres' },
                    { nome: 'Raoni Rosa', link: 'https://calendly.com/raoni-feb/mentoria-individualizada-do-programa-mentor-de-lideres' }
                ]
            };
            
            const linkPlataforma = linksPlataforma[alunoData.turma] || '#';
            const mentoresTurma = calendarios[alunoData.turma] || [];
            
            document.getElementById('dashboardContent').innerHTML = `
                <div class="dashboard-header">
                    <div>
                        <h2>Ol√°, ${nomeExibicao}! üëã</h2>
                        <p>${alunoData.turma}</p>
                    </div>
                    <div class="aluno-header-actions">
                        <button class="btn-edit-name" id="btnEditarNome">
                            ‚úèÔ∏è Editar Nome
                        </button>
                        <button class="logout-btn-aluno" id="btnLogoutAluno">Sair</button>
                    </div>
                </div>

                <div class="progress-section">
                    <div class="progress-header">
                        <h3>üìä Seu Progresso</h3>
                        <span class="progress-percentage">${progress}%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${progress}%"></div>
                    </div>
                </div>

                <!-- SE√á√ÉO DE ARQU√âTIPO -->
                <div id="arquetipoSection" class="arquetipo-section" style="display: none;">
                    <div class="arquetipo-header">
                        <span class="arquetipo-icon-header">üåü</span>
                        <h3 class="arquetipo-title-main">SEU ARQU√âTIPO</h3>
                    </div>
                    <div class="arquetipo-card">
                        <div class="arquetipo-card-content">
                            <div class="arquetipo-emoji">ü¶Å</div>
                            <h4 class="arquetipo-nome">HER√ìI</h4>
                            <p class="arquetipo-frase">"Frase inspiradora aqui"</p>
                            <div class="arquetipo-detalhes"></div>
                            <a href="#" class="btn-download-arquetipo" target="_blank">
                                <span class="btn-icon">üì•</span>
                                <span>Baixar PDF do Arqu√©tipo</span>
                            </a>
                        </div>
                    </div>
                </div>

                <div class="acesso-rapido-section">
                    <div class="acesso-rapido-header">
                        <span class="acesso-rapido-icon">üöÄ</span>
                        <h3 class="acesso-rapido-title">Acesso R√°pido</h3>
                    </div>
                    
                    <a href="${linkPlataforma}" target="_blank" class="btn-plataforma-videos">
                        <span class="btn-icon">üé¨</span>
                        <div class="btn-text">
                            <strong>Plataforma de V√≠deos</strong>
                            <small>Acesse os conte√∫dos exclusivos da sua turma</small>
                        </div>
                        <span class="btn-arrow">‚Üí</span>
                    </a>

                    <div class="agendamento-section">
                        <div class="agendamento-header">
                            <span class="agendamento-icon">üìÖ</span>
                            <h4>Agende sua Mentoria</h4>
                        </div>
                        <div class="mentores-grid">
                            ${mentoresTurma.map(mentor => `
                                <a href="${mentor.link}" target="_blank" class="btn-mentor">
                                    <span class="mentor-icon">üë§</span>
                                    <span class="mentor-nome">${mentor.nome}</span>
                                    <span class="mentor-arrow">‚Üí</span>
                                </a>
                            `).join('')}
                        </div>
                    </div>
                </div>

                <div id="bibliotecaContainer"></div>
                <h2 class="section-title">üìù Seus Formul√°rios</h2>
                <div id="formulariosContainer"></div>
            `;

            document.getElementById('btnEditarNome').addEventListener('click', abrirModalEditarNome);
            document.getElementById('btnLogoutAluno').addEventListener('click', () => {
                trocarTela(['dashboardScreen'], 'loginScreen');
                document.getElementById('loginForm').reset();
            });

            renderizarBiblioteca();
            configurarAcessoRapido();
            renderizarArquetipo();  // ‚Üê CORRE√á√ÉO 2 APLICADA!
            renderizarFormularios();
        }

        function calcularProgresso() {
            const preenchidos = alunoData.formularios.filter(f => f.status === 'Preenchido').length;
            return Math.round((preenchidos / 6) * 100);
        }

        function renderizarBiblioteca() {
            const container = document.getElementById('bibliotecaContainer');
            
            if (biblioteca.length === 0) {
                container.innerHTML = '';
                return;
            }
            
            container.innerHTML = `
                <div class="biblioteca-section">
                    <div class="biblioteca-header">
                        <span class="biblioteca-icon">üìö</span>
                        <h3 class="biblioteca-title">Biblioteca de Recursos</h3>
                    </div>
                    <div class="recursos-grid">
                        ${biblioteca.map(recurso => `
                            <div class="recurso-card">
                                <div class="recurso-header">
                                    <span class="recurso-icon">${recurso.emoji}</span>
                                    <div class="recurso-info">
                                        <h4 class="recurso-title">${recurso.titulo}</h4>
                                    </div>
                                </div>
                                <p class="recurso-descricao">${recurso.descricao}</p>
                                <span class="recurso-categoria">${recurso.categoria}</span>
                                <a href="${recurso.link}" target="_blank" class="btn-download">
                                    üì• Acessar Recurso
                                </a>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function configurarAcessoRapido() {
            // Configura√ß√£o j√° est√° no HTML gerado
        }

        function renderizarFormularios() {
            const container = document.getElementById('formulariosContainer');
            container.innerHTML = `
                <div class="formularios-grid">
                    ${alunoData.formularios.map(form => `
                        <div class="formulario-card">
                            <div class="formulario-header">
                                <h4 class="formulario-title">${form.nome}</h4>
                                <span class="status-badge ${form.status === 'Preenchido' ? 'status-preenchido' : 'status-pendente'}">
                                    ${form.status === 'Preenchido' ? '‚úì Preenchido' : '‚è≥ Pendente'}
                                </span>
                            </div>
                            ${form.status === 'Preenchido' 
                                ? `<a href="${form.link}" target="_blank" class="btn-formulario btn-concluido">‚úì Visualizar</a>`
                                : `<a href="${form.link}" target="_blank" class="btn-formulario btn-preencher">Preencher Agora</a>`
                            }
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // ==================== MODAL EDITAR NOME ====================
        function abrirModalEditarNome() {
            const modal = document.getElementById('modalEditarNome');
            const input = document.getElementById('novoNomePreferido');
            input.value = alunoData.nomePreferido || '';
            modal.classList.add('active');
        }

        function fecharModalEditarNome() {
            const modal = document.getElementById('modalEditarNome');
            modal.classList.remove('active');
        }

        document.getElementById('btnCancelarNome').addEventListener('click', fecharModalEditarNome);
        
        document.getElementById('btnSalvarNome').addEventListener('click', async () => {
            const novoNome = document.getElementById('novoNomePreferido').value.trim();
            if (!novoNome) {
                alert('Por favor, digite um nome.');
                return;
            }
            
            alunoData.nomePreferido = novoNome;
            alert('‚úÖ Nome atualizado com sucesso!\n\n‚ö†Ô∏è Observa√ß√£o: Esta altera√ß√£o √© tempor√°ria nesta sess√£o. Para salvar permanentemente, voc√™ precisa atualizar a planilha do Google Sheets.');
            
            fecharModalEditarNome();
            mostrarDashboard();
        });

        document.getElementById('modalEditarNome').addEventListener('click', (e) => {
            if (e.target.id === 'modalEditarNome') {
                fecharModalEditarNome();
            }
        });

        // ==================== PRIMEIRO ACESSO ====================
        document.getElementById('novaSenhaPrimeiroAcesso').addEventListener('input', function() {
            atualizarBarraForca(this, 'strengthBarPrimeiroAcesso');
        });

        document.getElementById('primeiroAcessoForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            limparMensagem('primeiroAcessoMessage');
            
            const nomePreferido = document.getElementById('nomePreferidoInput').value.trim();
            const novaSenha = document.getElementById('novaSenhaPrimeiroAcesso').value;
            const confirmarSenha = document.getElementById('confirmarSenhaPrimeiroAcesso').value();
            
            if (novaSenha !== confirmarSenha) {
                mostrarMensagem('primeiroAcessoMessage', 'As senhas n√£o coincidem', 'erro');
                return;
            }
            
            if (calcularForcaSenha(novaSenha) < 2) {
                mostrarMensagem('primeiroAcessoMessage', 'Senha muito fraca. Use pelo menos 8 caracteres com letras e n√∫meros.', 'erro');
                return;
            }
            
            alunoData.nomePreferido = nomePreferido;
            alunoData.senha = novaSenha;
            alunoData.primeiroAcesso = false;
            
            mostrarMensagem('primeiroAcessoMessage', '‚úÖ Configura√ß√£o conclu√≠da!\n\n‚ö†Ô∏è Para salvar permanentemente, atualize a planilha:\n- Nome Preferido na coluna C\n- Nova Senha na coluna E\n- "Primeiro Acesso" = "N√£o" na coluna H', 'sucesso');
            
            setTimeout(() => {
                trocarTela(['primeiroAcessoScreen'], 'dashboardScreen');
                mostrarDashboard();
            }, 3000);
        });

        // ==================== RECUPERA√á√ÉO DE SENHA ====================
        document.getElementById('linkEsqueciSenha').addEventListener('click', () => {
            trocarTela(['loginScreen'], 'recuperarSenhaScreen');
            limparMensagem('recuperarMessage');
        });

        document.getElementById('linkVoltarLogin').addEventListener('click', () => {
            trocarTela(['recuperarSenhaScreen'], 'loginScreen');
        });

        document.getElementById('linkVoltarLogin2').addEventListener('click', () => {
            trocarTela(['redefinirSenhaScreen'], 'loginScreen');
        });

        document.getElementById('recuperarForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            limparMensagem('recuperarMessage');
            
            const email = document.getElementById('emailRecuperar').value;
            await carregarDados();
            
            const aluno = todosAlunos.find(a => a.email.toLowerCase() === email.toLowerCase());
            
            if (!aluno || !aluno.codigoRecuperacao) {
                mostrarMensagem('recuperarMessage', 'Email n√£o encontrado ou sem c√≥digo de recupera√ß√£o configurado', 'erro');
                return;
            }
            
            mostrarMensagem('recuperarMessage', `‚úÖ C√≥digo encontrado: ${aluno.codigoRecuperacao}`, 'sucesso');
            
            setTimeout(() => {
                trocarTela(['recuperarSenhaScreen'], 'redefinirSenhaScreen');
            }, 2000);
        });

        document.getElementById('novaSenha').addEventListener('input', function() {
            atualizarBarraForca(this, 'strengthBar');
        });

        document.getElementById('redefinirForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            limparMensagem('redefinirMessage');
            
            const codigo = document.getElementById('codigoRecuperacao').value;
            const novaSenha = document.getElementById('novaSenha').value;
            const confirmarSenha = document.getElementById('confirmarSenha').value;
            
            if (novaSenha !== confirmarSenha) {
                mostrarMensagem('redefinirMessage', 'As senhas n√£o coincidem', 'erro');
                return;
            }
            
            if (calcularForcaSenha(novaSenha) < 2) {
                mostrarMensagem('redefinirMessage', 'Senha muito fraca. Use pelo menos 8 caracteres com letras e n√∫meros.', 'erro');
                return;
            }
            
            await carregarDados();
            const aluno = todosAlunos.find(a => a.codigoRecuperacao === codigo);
            
            if (!aluno) {
                mostrarMensagem('redefinirMessage', 'C√≥digo de recupera√ß√£o inv√°lido', 'erro');
                return;
            }
            
            mostrarMensagem('redefinirMessage', `‚úÖ Senha redefinida com sucesso!\n\n‚ö†Ô∏è Atualize a coluna E (Senha) na planilha para: ${novaSenha}`, 'sucesso');
            
            setTimeout(() => {
                trocarTela(['redefinirSenhaScreen'], 'loginScreen');
                document.getElementById('redefinirForm').reset();
            }, 3000);
        });

        // ==================== MASTER DASHBOARD ====================
        async function renderizarMasterDashboard() {
            await carregarDados();
            
            const stats = calcularEstatisticas();
            
            document.getElementById('masterContent').innerHTML = `
                <div class="dashboard-header">
                    <div>
                        <h2>Dashboard Master ü¶Å</h2>
                        <p>Vis√£o completa do programa</p>
                    </div>
                    <div class="master-header-actions">
                        <span class="badge-master">ADMIN</span>
                        <button class="logout-btn-header" id="btnLogoutMaster">Sair</button>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">${stats.totalAlunos}</div>
                        <div class="stat-label">Total de Alunos</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${stats.progressoMedio}%</div>
                        <div class="stat-label">Progresso M√©dio</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${stats.formulariosPreenchidos}</div>
                        <div class="stat-label">Formul√°rios Preenchidos</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${stats.formulariosPendentes}</div>
                        <div class="stat-label">Formul√°rios Pendentes</div>
                    </div>
                </div>

                <div class="strategic-section">
                    <h2 class="strategic-title">üìä Vis√£o Estrat√©gica</h2>
                    
                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-label">Taxa de Conclus√£o</div>
                            <div class="kpi-value">${stats.progressoMedio}%</div>
                            <div class="kpi-sublabel">Meta: 100%</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-label">Alunos Ativos</div>
                            <div class="kpi-value">${stats.totalAlunos}</div>
                            <div class="kpi-sublabel">${stats.turma1} T1 + ${stats.turma2} T2</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-label">Formul√°rios Totais</div>
                            <div class="kpi-value">${stats.totalFormularios}</div>
                            <div class="kpi-sublabel">${stats.formulariosPreenchidos} conclu√≠dos</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-label">Taxa de Pend√™ncia</div>
                            <div class="kpi-value">${Math.round((stats.formulariosPendentes / stats.totalFormularios) * 100)}%</div>
                            <div class="kpi-sublabel">${stats.formulariosPendentes} pendentes</div>
                        </div>
                    </div>

                    ${renderizarComparacaoTurmas(stats)}
                    ${renderizarInsights(stats)}
                </div>

                <div class="tabs">
                    <div class="tab active" data-tab="turma1">TURMA 1 (${stats.turma1})</div>
                    <div class="tab" data-tab="turma2">TURMA 2 (${stats.turma2})</div>
                    <div class="tab" data-tab="todos">TODOS (${stats.totalAlunos})</div>
                </div>

                <div id="alunosContainer"></div>
            `;

            document.getElementById('btnLogoutMaster').addEventListener('click', () => {
                trocarTela(['masterDashboard'], 'loginScreen');
                document.getElementById('loginForm').reset();
            });

            configurarTabs();
            renderizarAlunos('todos');
        }

        function calcularEstatisticas() {
            const stats = {
                totalAlunos: todosAlunos.length,
                turma1: todosAlunos.filter(a => a.turma === 'TURMA 1').length,
                turma2: todosAlunos.filter(a => a.turma === 'TURMA 2').length,
                formulariosPreenchidos: 0,
                formulariosPendentes: 0,
                totalFormularios: todosAlunos.length * 6,
                progressoMedio: 0
            };

            let somaProgresso = 0;

            todosAlunos.forEach(aluno => {
                aluno.formularios.forEach(form => {
                    if (form.status === 'Preenchido') {
                        stats.formulariosPreenchidos++;
                    } else {
                        stats.formulariosPendentes++;
                    }
                });
                somaProgresso += (aluno.formularios.filter(f => f.status === 'Preenchido').length / 6) * 100;
            });

            stats.progressoMedio = Math.round(somaProgresso / todosAlunos.length);

            return stats;
        }

        function renderizarComparacaoTurmas(stats) {
            const turma1Alunos = todosAlunos.filter(a => a.turma === 'TURMA 1');
            const turma2Alunos = todosAlunos.filter(a => a.turma === 'TURMA 2');

            const calcularStats = (alunos) => {
                const preenchidos = alunos.reduce((acc, a) => 
                    acc + a.formularios.filter(f => f.status === 'Preenchido').length, 0);
                const total = alunos.length * 6;
                return {
                    preenchidos,
                    total,
                    percentual: Math.round((preenchidos / total) * 100)
                };
            };

            const t1 = calcularStats(turma1Alunos);
            const t2 = calcularStats(turma2Alunos);

            return `
                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>M√©trica</th>
                                <th>TURMA 1</th>
                                <th>TURMA 2</th>
                                <th>Diferen√ßa</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Total de Alunos</strong></td>
                                <td>${stats.turma1}</td>
                                <td>${stats.turma2}</td>
                                <td class="gap-indicator ${stats.turma1 > stats.turma2 ? 'gap-positive' : stats.turma1 < stats.turma2 ? 'gap-negative' : ''}">
                                    ${stats.turma1 - stats.turma2 > 0 ? '+' : ''}${stats.turma1 - stats.turma2}
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Formul√°rios Preenchidos</strong></td>
                                <td>${t1.preenchidos}/${t1.total}</td>
                                <td>${t2.preenchidos}/${t2.total}</td>
                                <td class="gap-indicator ${t1.percentual > t2.percentual ? 'gap-positive' : t1.percentual < t2.percentual ? 'gap-negative' : ''}">
                                    ${t1.percentual - t2.percentual > 0 ? '+' : ''}${t1.percentual - t2.percentual}%
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Taxa de Conclus√£o</strong></td>
                                <td>
                                    ${t1.percentual}%
                                    <div class="progress-bar-mini">
                                        <div class="progress-fill-mini" style="width: ${t1.percentual}%"></div>
                                    </div>
                                </td>
                                <td>
                                    ${t2.percentual}%
                                    <div class="progress-bar-mini">
                                        <div class="progress-fill-mini" style="width: ${t2.percentual}%"></div>
                                    </div>
                                </td>
                                <td>
                                    ${t1.percentual > t2.percentual 
                                        ? '<span class="success-badge">T1 Lidera</span>' 
                                        : t2.percentual > t1.percentual 
                                        ? '<span class="success-badge">T2 Lidera</span>' 
                                        : '<span class="success-badge">Empate</span>'}
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            `;
        }

        function renderizarInsights(stats) {
            const insights = [];

            if (stats.formulariosPendentes > stats.formulariosPreenchidos) {
                insights.push({
                    titulo: '‚ö†Ô∏è Aten√ß√£o: Alta Pend√™ncia',
                    texto: `${stats.formulariosPendentes} formul√°rios ainda est√£o pendentes. Considere enviar lembretes aos alunos.`
                });
            }

            if (stats.progressoMedio < 50) {
                insights.push({
                    titulo: 'üìâ Progresso Abaixo da Meta',
                    texto: `Progresso m√©dio est√° em ${stats.progressoMedio}%. Recomenda-se a√ß√µes de engajamento.`
                });
            } else if (stats.progressoMedio >= 80) {
                insights.push({
                    titulo: 'üéØ Excelente Desempenho',
                    texto: `Progresso m√©dio de ${stats.progressoMedio}%! A turma est√° altamente engajada.`
                });
            }

            if (insights.length === 0) {
                insights.push({
                    titulo: '‚úÖ Programa em Andamento',
                    texto: `${stats.formulariosPreenchidos} de ${stats.totalFormularios} formul√°rios conclu√≠dos. Continue monitorando o progresso.`
                });
            }

            return insights.map(insight => `
                <div class="insight-box">
                    <h4>${insight.titulo}</h4>
                    <p>${insight.texto}</p>
                </div>
            `).join('');
        }

        function configurarTabs() {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    renderizarAlunos(tab.dataset.tab);
                });
            });
        }

        function renderizarAlunos(filtro) {
            let alunosFiltrados = todosAlunos;

            if (filtro === 'turma1') {
                alunosFiltrados = todosAlunos.filter(a => a.turma === 'TURMA 1');
            } else if (filtro === 'turma2') {
                alunosFiltrados = todosAlunos.filter(a => a.turma === 'TURMA 2');
            }

            const container = document.getElementById('alunosContainer');
            container.innerHTML = alunosFiltrados.map(aluno => {
                const progress = Math.round((aluno.formularios.filter(f => f.status === 'Preenchido').length / 6) * 100);
                return `
                    <div class="aluno-card">
                        <div class="aluno-header" onclick="toggleAluno(this)">
                            <div class="aluno-info">
                                <div class="aluno-nome">${aluno.nomePreferido || aluno.nome}</div>
                                <div class="aluno-email">${aluno.email} ‚Ä¢ ${aluno.turma}</div>
                            </div>
                            <div class="aluno-stats">
                                <div class="mini-progress">${progress}%</div>
                                <div class="expand-icon">‚ñº</div>
                            </div>
                        </div>
                        <div class="aluno-details">
                            <div class="formularios-table">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Formul√°rio</th>
                                            <th>Status</th>
                                            <th>Link</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${aluno.formularios.map(form => `
                                            <tr class="formulario-row" onclick="toggleFormularioDetalhes(this, '${form.nome}')">
                                                <td>
                                                    ${form.nome}
                                                    <span class="expand-icon-table">‚ñº</span>
                                                </td>
                                                <td>
                                                    <span class="status-icon">${form.status === 'Preenchido' ? '‚úÖ' : '‚è≥'}</span>
                                                    ${form.status}
                                                </td>
                                                <td>
                                                    ${form.link ? `<a href="${form.link}" target="_blank" onclick="event.stopPropagation()">üîó Abrir</a>` : '-'}
                                                </td>
                                            </tr>
                                            <tr class="formulario-details">
                                                <td colspan="3">
                                                    <div class="formulario-details-content">
                                                        <h4 style="margin-bottom: 20px; color: #0dcaf0; font-size: 1.3em;">üìä An√°lise: ${form.nome}</h4>
                                                        <div class="turmas-comparison">
                                                            ${renderizarDetalhesFormulario(form.nome, 'TURMA 1')}
                                                            ${renderizarDetalhesFormulario(form.nome, 'TURMA 2')}
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        `).join('')}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderizarDetalhesFormulario(nomeFormulario, nomeTurma) {
            const alunosTurma = todosAlunos.filter(a => a.turma === nomeTurma);
            const formIndex = ['Trajet√≥ria de Carreira', 'Roda da Vida e do Trabalho', 'Invent√°rio de Personalidade', 
                               'An√°lise Profunda', 'Portf√≥lio de Lideran√ßa', 'Plano de Desenvolvimento'].indexOf(nomeFormulario);

            const preenchidos = alunosTurma.filter(a => a.formularios[formIndex].status === 'Preenchido');
            const pendentes = alunosTurma.filter(a => a.formularios[formIndex].status === 'Pendente');

            return `
                <div class="turma-alunos-box">
                    <h3 class="turma-alunos-title">${nomeTurma}</h3>
                    <div class="turma-alunos-content">
                        <div>
                            <h4 class="alunos-section-title preenchidos">‚úÖ Preenchidos (${preenchidos.length})</h4>
                            <div class="alunos-section">
                                ${preenchidos.length > 0 
                                    ? preenchidos.map(a => `
                                        <div class="aluno-item">
                                            <div>${a.nomePreferido || a.nome}</div>
                                            <div class="aluno-item-email">${a.email}</div>
                                        </div>
                                    `).join('')
                                    : '<div class="empty-list">Nenhum aluno preencheu ainda</div>'
                                }
                            </div>
                        </div>
                        <div>
                            <h4 class="alunos-section-title pendentes">‚è≥ Pendentes (${pendentes.length})</h4>
                            <div class="alunos-section">
                                ${pendentes.length > 0
                                    ? pendentes.map(a => `
                                        <div class="aluno-item">
                                            <div>${a.nomePreferido || a.nome}</div>
                                            <div class="aluno-item-email">${a.email}</div>
                                        </div>
                                    `).join('')
                                    : '<div class="empty-list">Todos preencheram! üéâ</div>'
                                }
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function toggleAluno(element) {
            const card = element.parentElement;
            card.classList.toggle('expanded');
        }

        function toggleFormularioDetalhes(row, nomeFormulario) {
            const detailsRow = row.nextElementSibling;
            const isExpanded = row.classList.contains('expanded');

            document.querySelectorAll('.formulario-row').forEach(r => r.classList.remove('expanded'));
            document.querySelectorAll('.formulario-details').forEach(d => d.classList.remove('active'));

            if (!isExpanded) {
                row.classList.add('expanded');
                detailsRow.classList.add('active');
            }
        }

        // ==================== INICIALIZA√á√ÉO ====================
        carregarDados();
    </script>
</body>
</html>
